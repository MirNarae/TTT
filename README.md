# **A105조 주식 백테스팅 웹 서비스**

# 왜 이걸 만들었는가?
저희 팀은 평소에 금융에 관심이 아주 많은 팀원들로 이루어져 있습니다. 

어떤 주식이 최근에 올랐다더라 내렸다더라 하면서 이야기 꽃을 피우기도 합니다. 

그러나 저희는 평소에 싸피의 바쁜 일정과 취업준비를 병행하면서, 

수많은 주식들을 공부하고 분석할 시간이 턱없이 부족하기 때문에

수익을 얻을 수 있는 매매를 하기가 어려운 것이 현실입니다. 

그래서 저희는, 과거 20년간의 주식 일일 변동 데이터를 통해 각자 생각한 알고리즘을 테스팅하여

개인 맞춤 주식 포트폴리오를 만들 수 있도록 도와주는 웹 서비스를 구상하게 되었습니다.

# 시장 현황 파악하기
## 자산 관리 알고리즘의 2가지 방향

1. 인베스팅 : 

    포트폴리오 이론을 기반으로 주기적으로 자산을 정해진 비율만큼 유지하도록 매매하는 리밸런싱 알고리즘 등이 있습니다. 

    상대적으로 긴 주기를 두고 정기적으로 자산을 재분배하기 때문에 매매 수수료의 부담이 적으며,
    시장 수익률에 기반하기 때문에 기간을 멀리 보면 안정적으로 자산을 늘릴 수 있는 방법입니다. 
    운용 수수료와 이익에 대한 성과급으로 수익을 냅니다. 

2. 트레이딩 : 

    효율적 시장 가설을 기반으로 한 변동성 돌파 전략, 

    그리고 선물과 현물 등 상관계수가 1에 가까운 그룹의 가격변동을 활용해 차익거래(Arbitrage)하여 수익을 내는 방법 등이 있습니다. 

    시장을 실시간으로 지켜보며 비교적 짧은 주기로 매매하여 수익을 내는 구조이기 때문에 일반 투자자가 시스템 트레이딩을 따라하기 어렵다는 단점이 있습니다. 주식 뿐만 아니라 암호화폐 등에도 적용이 가능한 방법입니다. 
    운용 보수를 받거나 알고리즘 사용에 따른 수수료를 받아 수익을 냅니다.

## 경쟁 애플리케이션의 2가지 방향

1. 자문형 : 고객 맞춤형 투자자문 제공    
    대표회사> 디멘젼투자자문, 파운트, 에임    
![roboexample2](/readme/roboexample2.png)    
2. 일임형 : 자산 배분 후 앱이 직접 자산 운용    
    대표회사> 밸류시스템자산운용, 아이로보, 쿼터백자산운용    
![roboexample](/readme/roboexample.png)  

# 그렇다면 우리 프로젝트는?

### 큰 틀

저희 프로젝트는 자문형 서비스를 기반으로, 

사용자가 자신만의 투자 전략을 직접 시뮬레이션해 볼 수 있는 서비스를 목적으로 하였습니다. 

저희가 직접적으로 종목이나 비율, 또는 매수 매도 시기를 추천해주지는 않지만 

사용자가 직접 파라미터를 설정하여 과거 20년간의 데이터를 기반으로 전략을 백테스팅하여 검증해보고

올바른 투자 포트폴리오를 설계할 수 있도록 도와주는 서비스를 만들고자 하였습니다. 

# 서비스 플로우
![flow](/readme/flow.png)  

저희는 위와 같이 간단하게 사용 플로우를 구상하였습니다. 

사용자는 웹사이트에서 들어와서 투자전략을 바로 입력하고 

저희가 구축한 방대한 DB데이터를 통해 사용자는 개인의 전략이

과거에 적용되었다면 수익률이 어떻게 되었을지 확인해 보고 

개인의 포트폴리오의 상세 파라미터를 조정하여 

보다 완성된 투자 전략을 설계할 수 있게 됩니다. 

# 우리 프로젝트 구조 다이어그램
![diagram](/readme/diagram.png)

위 서비스 플로우를 구현하기 위해 저희는 이와 같은 웹 구조 다이어그램을 작성하였습니다. 

우선 과거의 20년치 일일 주식 가격 변동 데이터를 가져와 저희 DB에 저장하기 위해,

대신증권의 크레온이라는 증권사 API를 활용하였습니다. 

우리나라의 증권사 api는 주로 Windows OS만 호환되도록 제공되기 때문에

AWS EC2로 윈도우 서버를 하나 추가로 만들어 

싸피에서 제공받은 우분투 서버에서 돌아가는 백엔드 장고에 

RESTful api를 따로 제공하도록 윈도우로 중간다리 서버를 구축하였습니다. 

![windows](/readme/windows.png)

이 Windows 브릿지 서버를 통해 저희 백엔드 장고에서 

증권사 api를 Windows가 아닌 우분투에서도 공인인증서없이 이용할 수 있도록 하였습니다. 

저희는 이를 바탕으로 장고에서 현재 상장되어있는 모든 주식과 ETF의 20년간의 일봉데이터, 

약 828만개를 전달받아 DB에 모두 저장하였으며,

매일 매일 업데이트되는 과정을 자동화하였습니다. 

![db](/readme/db.png)

저희는 이를 바탕으로 사용자에게 백테스팅 시뮬레이션 서비스를 제공하기 위해  

포트폴리오 이론에 따른 리밸런싱 알고리즘을 구현하였습니다. 



# 증권사 API
![jungwon](/readme/jungwon.png)

# 매매 알고리즘



# 요구사항 정의
![reqs](/readme/reqs.png)

# 깃
![git-flo](/readme/git-flow.png)    
master-develop-프론트/백의 3단계 브랜치 구조    

master 브랜치에 Jenkins를 연동하여 CI/CD를 자동화할 예정입니다.     

# 개발자 설명
김동주 : 팀장, 프로젝트 매니저, 인프라

이은규 : 프론트의 신

오병관 : 알고리즘의 신

서유리 : 데이터의 신

PS. 위 4명 모두 올해 안에 취업